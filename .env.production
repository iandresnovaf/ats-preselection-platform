# ============================================
# ATS Platform - Production Environment
# ============================================
# WARNING: This file contains sensitive information.
# DO NOT commit to version control!
# Copy to .env and fill in actual values.
# ============================================

# ============================================
# Application Settings
# ============================================
APP_NAME="ATS Preselection Platform"
APP_VERSION="1.0.0"
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# ============================================
# Database (PostgreSQL)
# ============================================
# Use strong password (minimum 16 characters, mixed case, numbers, symbols)
# Example: DATABASE_URL=postgresql+asyncpg://ats_user:SecureP@ssw0rd123!@localhost:5432/ats_platform
DATABASE_URL=postgresql+asyncpg://user:STRONG_PASSWORD_HERE@localhost:5432/ats_platform

# Connection pool settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# ============================================
# Redis Cache
# ============================================
REDIS_URL=redis://localhost:6379/0
REDIS_POOL_SIZE=50

# ============================================
# Security Keys (MUST BE CHANGED!)
# ============================================
# Generate with: python scripts/generate_secrets.py
# SECRET_KEY: Minimum 32 characters, random string
SECRET_KEY=REPLACE_WITH_32_PLUS_CHAR_RANDOM_STRING

# ENCRYPTION_KEY: Fernet key (32 bytes base64 encoded)
ENCRYPTION_KEY=REPLACE_WITH_FERNET_KEY_FROM_GENERATE_SECRETS

# JWT Configuration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# Default Admin User (MUST BE CHANGED!)
# ============================================
# These are used only on first deployment to create the admin account
DEFAULT_ADMIN_EMAIL=admin@yourdomain.com
DEFAULT_ADMIN_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_123!

# ============================================
# Cookie Security
# ============================================
COOKIE_SECURE=true
COOKIE_SAMESITE=strict
COOKIE_HTTPONLY=true

# ============================================
# CORS Configuration
# ============================================
# IMPORTANT: In production, NEVER use "*" 
# List your exact domains separated by commas
# CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_ORIGINS=https://yourdomain.com

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis

# General API rate limits
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# LLM-specific rate limits (prevents runaway costs)
LLM_RATE_LIMIT_MINUTE=5
LLM_RATE_LIMIT_HOUR=50
LLM_RATE_LIMIT_DAY=200

# ============================================
# OpenAI API Configuration
# ============================================
# Get your API key from: https://platform.openai.com/api-keys
# Set spending limits at: https://platform.openai.com/account/billing/limits
OPENAI_API_KEY=sk-REPLACE_WITH_YOUR_OPENAI_API_KEY
OPENAI_ORG_ID=org-REPLACE_WITH_YOUR_ORG_ID

# Model configuration
OPENAI_DEFAULT_MODEL=gpt-4
OPENAI_FALLBACK_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.3

# ============================================
# File Upload Settings
# ============================================
# Maximum file size in bytes (10MB default)
MAX_FILE_SIZE=10485760

# Upload directory (must be writable by the app)
UPLOAD_DIR=/var/www/uploads

# Allowed file types (comma-separated extensions)
ALLOWED_UPLOAD_EXTENSIONS=pdf,doc,docx,txt,rtf,odt,png,jpg,jpeg

# ============================================
# Email Configuration (Optional)
# ============================================
# SMTP Settings for notifications
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=true
SMTP_FROM=noreply@yourdomain.com

# ============================================
# Monitoring & Logging
# ============================================
# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Log file paths
LOG_FILE=/var/log/ats-platform/app.log
ERROR_LOG_FILE=/var/log/ats-platform/error.log

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=/var/log/ats-platform/audit.log

# ============================================
# Background Tasks (Celery)
# ============================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ============================================
# Feature Flags
# ============================================
ENABLE_LLM_FEATURES=true
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_AUDIT_LOGGING=true

# ============================================
# WhatsApp Business API Configuration (Optional)
# ============================================
# Set to true to enable WhatsApp integration
WHATSAPP_ENABLED=false

# Set to true for development/testing without Meta credentials
WHATSAPP_MOCK_MODE=false

# API Version (default: v18.0)
WHATSAPP_API_VERSION=v18.0

# From Meta Business Account Dashboard
WHATSAPP_BUSINESS_ACCOUNT_ID=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_ACCESS_TOKEN=

# Webhook verification (create a secure random string)
WHATSAPP_WEBHOOK_VERIFY_TOKEN=

# App Secret for webhook signature verification (from Meta App Dashboard)
WHATSAPP_APP_SECRET=

# ============================================
# WhatsApp Template Names (must be approved by Meta)
# ============================================
WHATSAPP_TEMPLATE_INITIAL=contacto_inicial
WHATSAPP_TEMPLATE_FOLLOWUP=seguimiento
WHATSAPP_TEMPLATE_REMINDER=recordatorio_entrevista
